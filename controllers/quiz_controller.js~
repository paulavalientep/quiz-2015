var models = require('../models/models.js');


//AUTOLOAD factoriza el c√≥digo si la ruta incluye    :quizId
exports.load = function(req, res, next, quizId){
	models.Quiz.find(quizId).then(
		function(quiz){
			if(quiz){
				req.quiz=quiz:
					next{};
			}else{next(new Error{'No existe quizId='+quizId));}
		}
	).catch(function(error){next(error);});
};

//GET /quizes

exports.index = function(req, res){
models.Quiz.findAll().then(function(quizes)){
	
		res.render('quizes/index.ejs', { quizes: quizes});	
	})
};

//GET /quizes/:id

exports.show = function(req, res) {
	models.Quiz.findAll().success(function(quiz)){
	
		res.render('quizes/question', { pregunta: quiz[0].pregunta});	
	})
};

//GET /quizes/:id/answer

exports.answer = function(req, res) {
	models.Quiz.findAll().success(function(quiz)){
		if (req.query.respuesta === quiz[0].respuesta){
			res.render('quizes/answer', {respuesta: "Correcto"});
		} else {
			res.render('quizes/answer', {respuesta: "Incorrecto"});
		}
	})
};




